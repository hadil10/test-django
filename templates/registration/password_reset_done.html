{% extends 'base.html' %}

{% block title %}Instructions Envoyées{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-md-8 mx-auto text-center">
            <div class="card shadow-sm">
                <div class="card-body p-5">
                    
                    <i class="bi bi-check-circle-fill text-success" style="font-size: 4rem;"></i>

                    <h2 class="card-title mt-3">Instructions envoyées !</h2>
                    
                    <p class="lead text-muted mt-3">
                        Nous vous avons envoyé par e-mail les instructions pour réinitialiser votre mot de passe, si un compte existe avec l'adresse que vous avez fournie.
                    </p>
                    <p>
                        Vous devriez recevoir cet e-mail sous peu.
                    </p>
                    
                    <hr>

                    <div class="mt-4">
                        <a href="{% url 'profiles:home' %}" class="btn btn-primary">
                            <i class="bi bi-house-fill me-2"></i>
                            Retour à la page d'accueil
                        </a>

                        <div id="resend-container" class="mt-3" style="display: none;">
                            <p class="mb-1">Vous n'avez pas reçu l'e-mail ?</p>
                            <a href="{% url 'password_reset' %}" class="btn btn-outline-secondary btn-sm">
                                Renvoyer les instructions
                            </a>
                        </div>

                        <div id="countdown-container" class="mt-3 text-muted">
                            <p>Vous pourrez renvoyer les instructions dans <span id="countdown-timer">30</span> secondes.</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const countdownTimer = document.getElementById('countdown-timer');
        const countdownContainer = document.getElementById('countdown-container');
        const resendContainer = document.getElementById('resend-container');

        let timeLeft = 30;

        const timerInterval = setInterval(function() {
            timeLeft--;

            countdownTimer.textContent = timeLeft;
  
            if (timeLeft <= 0) {
                // Arrête l'intervalle
                clearInterval(timerInterval);
                
                // Cache le message du compte à rebours
                countdownContainer.style.display = 'none';
                
                resendContainer.style.display = 'block';
            }
        }, 1000); // 1000 millisecondes = 1 seconde
    });
</script>
{% endblock %}
